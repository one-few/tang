<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>注册</title>
    <link href="favicon.ico" rel="shortcut icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.4.0/css/bootstrap.min.css" rel="stylesheet">

    <style>

        #modelBody{margin-top: 10%;}
        @media only screen and (max-device-width:480px){
            #modelBody{margin-top: 30%;}
        }
    </style>
</head>
<body style=" background: url(https://cn.bing.com//th?id=OHR.CahuitaNP_ZH-CN3985565209_1920x1080.jpg) no-repeat center center fixed; ">


<div class="modal-dialog" id="modelBody">
    <form action="/register" method="post">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title text-center" id="myModalLabel">登录</h4>
        </div>
        <div class="modal-body" id = "model-body">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="用户名" id="username" name="username" autocomplete=" " >
            </div>
            <div class="form-group">
                <input type="password" class="form-control" placeholder="密码" id="password" name="password" autocomplete=" ">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" placeholder="确认密码" id="password1" name="password1" autocomplete=" ">
            </div>
            <div class="form-group">
                <input class="form-control" placeholder="邮箱" name="mail" id="mail" autocomplete="off" >
            </div>
            <div class="form-group">
                <div class="input-group">
                    <input type="text" class="form-control" name="mailCode"  placeholder="验证码">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" id="sendmail">获取</button>
                    </span>
                </div><!-- /input-group -->
            </div>
        </div>
        <div class="modal-footer">
            <div class="form-group">
                <button type="submit" class="btn btn-primary form-control">提交注册</button>
            </div>
            <div class="btn-group" style="width: 100%;">
                <a style="width: 50%;" href="/login.html" type="button" class="btn btn-default">账号登陆</a>
                <button style="width: 50%;" type="button" class="btn btn-default">忘记密码</button>
            </div>

        </div>
    </div><!-- /.modal-content -->
    </form>
</div><!-- /.modal -->

</body>
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script>

    let interval;
    $(function(){
        $("#sendmail").click(function(){
            $.get("code/mail/"+$("#mail").val());
            $("#sendmail").attr("disabled","disabled")
            $("#sendmail").text("获取(30)")

            interval = setInterval("sj()",1000);


        })


        $('form').bootstrapValidator({
            message: 'This value is not valid',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                username: {
                    message: '用户名验证失败',
                    validators: {
                        notEmpty: {
                            message: '用户名不能为空'
                        }
                    }
                },
                email: {
                    validators: {
                        notEmpty: {
                            message: '邮箱地址不能为空'
                        }
                    }
                }
            }
        });

    })

    let c = 29;
    function sj(){
        $("#sendmail").text("获取("+c+")")

        if (c == 0){

            $("#sendmail").text("获取")
            $("#sendmail").removeAttr("disabled")
            clearInterval(interval)
        }

        c --;
    }
</script>
</html>